
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Branch documentation for mobile deep linking">
      
      
        <link rel="canonical" href="https://branchmetrics.github.io/docs/pages/apps/xamarin/">
      
      
        <meta name="author" content="Branch">
      
      
        <link rel="shortcut icon" href="../../../img/favicon-96x96.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.7.5">
    
    
      
        <title>Xamarin - Branch documentation</title>
      
    
    
      <script src="../../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <style>.async-hide{opacity:0!important}</style>
      <script>!function(e,t,a,n,o,i,c,s,g){t.className+=" "+a,i.start=1*new Date,i.end=c=function(){t.className=t.className.replace(RegExp(" ?"+a),"")},(e[n]=e[n]||[]).hide=i,setTimeout(function(){c(),i.end=null},o),i.timeout=o}(window,document.documentElement,"async-hide","dataLayer",4e3,{"GTM-PCPBXCN":!0}),function(e,t,a,n,o,i,c){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(a),c=t.getElementsByTagName(a)[0],i.async=1,i.src=n,c.parentNode.insertBefore(i,c)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","","auto"),ga("require","GTM-PCPBXCN"),ga("send","pageview")</script>
    
    
      <script>!function(e,t){if(!t.__SV){var n=window;try{var i,a,p,o=n.location,r=o.hash;i=function(e,t){return(a=e.match(RegExp(t+"=([^&]*)")))?a[1]:null},r&&i(r,"state")&&(p=JSON.parse(decodeURIComponent(i(r,"state"))),"mpeditor"===p.action&&(n.sessionStorage.setItem("_mpcehash",r),history.replaceState(p.desiredHash||"",e.title,o.pathname+o.search)))}catch(e){}var l,s;window.mixpanel=t,t._i=[],t.init=function(e,n,i){function a(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var p=t;for("undefined"!=typeof i?p=t[i]=[]:i="mixpanel",p.people=p.people||[],p.toString=function(e){var t="mixpanel";return"mixpanel"!==i&&(t+="."+i),e||(t+=" (stub)"),t},p.people.toString=function(){return p.toString(1)+".people (stub)"},l="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" "),s=0;s<l.length;s++)a(p,l[s]);t._i.push([e,n,i])},t.__SV=1.2,n=e.createElement("script"),n.type="text/javascript",n.async=!0,n.src="undefined"!=typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js",i=e.getElementsByTagName("script")[0],i.parentNode.insertBefore(n,i)}}(document,window.mixpanel||[]),mixpanel.init("47ec8ea9ac102b1370221dcda476091c")</script>
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css">
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application-769c285a91.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-02c2a4388f.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../../css/main.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="light-blue" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="https://branchmetrics.github.io/docs" title="Branch documentation" class="md-logo md-header-nav__button">
            <img src="../../../img/logo.svg">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <a href="https://branchmetrics.github.io/docs" title="Branch documentation">
            <div class="branch-header-subtitle">&nbsp;|&nbsp;Docs</div>
          </a>
        </div>
      
      
        <div class="md-flex__cell md-flex__cell--stretch">
          <span class="md-flex__ellipsis md-header-nav__title">
            
              
                
                  <span class="md-header-nav__parent">
                    Setup your app
                  </span>
                
              
              Xamarin
            
          </span>
        </div>
      
      
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="http://dev.branch.io/" id="header-old-docs" title="old docs">
            <i class="branch-header-icon md-icon material-icons">restore_page</i>
            <p class="branch-header-label">Old&nbsp;Docs</p>
          </a>
        </div>
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="#dialog-helpful" id="header-helpful" title="Helpful">
            <i class="branch-header-icon md-icon material-icons">thumb_up</i>
            <p class="branch-header-label">Helpful</p>
          </a>
        </div>
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="#dialog-unhelpful" id="header-unhelpful" title="Unhelpful">
            <i class="branch-header-icon md-icon material-icons">thumb_down</i>
            <p class="branch-header-label">Unhelpful</p>
          </a>
        </div>
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="#" class="improve-doc" title="Improve This Doc">
            <i class="branch-header-icon md-icon material-icons">mode_edit</i>
            <p class="branch-header-label">Improve</p>
          </a>
        </div>
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="#" class="contact-support" title="Contact support">
            <i class="branch-header-icon md-icon material-icons">help_outline</i>
            <p class="branch-header-label">Support</p>
          </a>
        </div>
        <div class="branch-header-button md-flex__cell md-flex__cell--shrink">
          <a href="#dialog-search" id="header-search" title="Search">
            <i class="branch-header-icon md-icon material-icons">search</i>
            <p class="branch-header-label">Search</p>
          </a>
        </div>
        <div class="md-flex__cell md-flex__cell--shrink" style="display:none">
      
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-logo md-nav__button">
        <img src="../../../img/logo.svg">
      </i>
    
    Branch documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/branchmetrics/docs" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Branch documentation
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
        
        
        
        
          
        
          
        
          
        
        


  <li class="md-nav__item">
    <a href="../../.." title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

      
    
      
        
        
        
        
          
            <li class="md-nav__item md-nav__link branch-nav-header">
              Basic deep linking
            </li>
          
        
          
        
          
        
        


  <li class="md-nav__item">
    <a href="../../dashboard/setup/" title="Setup your dashboard" class="md-nav__link">
      Setup your dashboard
    </a>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
        
        

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Setup your app
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Setup your app
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../ios/" title="iOS" class="md-nav__link">
      iOS
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../android/" title="Android" class="md-nav__link">
      Android
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../adobe-air/" title="Adobe AIR" class="md-nav__link">
      Adobe AIR
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../cordova-phonegap-ionic/" title="Cordova PhoneGap Ionic" class="md-nav__link">
      Cordova PhoneGap Ionic
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../mparticle-android/" title="mParticle Android" class="md-nav__link">
      mParticle Android
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../mparticle-ios/" title="mParticle iOS" class="md-nav__link">
      mParticle iOS
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../titanium/" title="Titanium" class="md-nav__link">
      Titanium
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../react-native/" title="React Native" class="md-nav__link">
      React Native
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../unity/" title="Unity" class="md-nav__link">
      Unity
    </a>
  </li>

          
        
          
            
            
            

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Xamarin
      </label>
    
    <a href="./" title="Xamarin" class="md-nav__link md-nav__link--active">
      Xamarin
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#integrate-branch" title="Integrate Branch" class="md-nav__link">
    Integrate Branch
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-branch" title="Configure Branch" class="md-nav__link">
    Configure Branch
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#branch-keys" title="Branch keys" class="md-nav__link">
    Branch keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-branch-link-domain-and-branch-key-for-an-app" title="Creating a Branch link domain and Branch key for an app" class="md-nav__link">
    Creating a Branch link domain and Branch key for an app
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-app" title="Configure app" class="md-nav__link">
    Configure app
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-branch-sdk-with-nuget" title="Adding the Branch SDK with NuGet" class="md-nav__link">
    Adding the Branch SDK with NuGet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-the-branch-sdk-without-nuget" title="Adding the Branch SDK without NuGet" class="md-nav__link">
    Adding the Branch SDK without NuGet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-branch" title="Initialize Branch" class="md-nav__link">
    Initialize Branch
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integrating-the-branch-sdk" title="Integrating the Branch SDK" class="md-nav__link">
    Integrating the Branch SDK
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xamarin-native-solutions" title="Xamarin Native solutions" class="md-nav__link">
    Xamarin Native solutions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-the-branch-sdk-with-an-ios-native-project" title="# Integrating the Branch SDK with an iOS Native project" class="md-nav__link">
    # Integrating the Branch SDK with an iOS Native project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-the-branch-sdk-with-an-android-native-project" title="# Integrating the Branch SDK with an Android Native project" class="md-nav__link">
    # Integrating the Branch SDK with an Android Native project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xamarin-forms-solutions" title="Xamarin Forms solutions" class="md-nav__link">
    Xamarin Forms solutions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-the-c-project" title="# Configuring the C# project" class="md-nav__link">
    # Configuring the C# project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-an-ios-forms-app" title="# Integrating with an iOS Forms app" class="md-nav__link">
    # Integrating with an iOS Forms app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-an-android-forms-app" title="# Integrating with an Android Forms app" class="md-nav__link">
    # Integrating with an Android Forms app
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-submitting-ios-apps-to-the-app-store" title="4 - Submitting iOS Apps to the App Store" class="md-nav__link">
    4 - Submitting iOS Apps to the App Store
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notifying-apple-of-idfa-usage" title="Notifying Apple of IDFA usage" class="md-nav__link">
    Notifying Apple of IDFA usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-deep-link" title="Test deep link" class="md-nav__link">
    Test deep link
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-features" title="Implement features" class="md-nav__link">
    Implement features
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-content-reference" title="Create content reference" class="md-nav__link">
    Create content reference
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-deep-link" title="Create deep link" class="md-nav__link">
    Create deep link
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#share-deep-link" title="Share deep link" class="md-nav__link">
    Share deep link
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read-deep-link" title="Read deep link" class="md-nav__link">
    Read deep link
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#retrieve-session-install-or-open-parameters" title="Retrieve session (install or open) parameters" class="md-nav__link">
    Retrieve session (install or open) parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieve-install-install-only-parameters" title="Retrieve install (install only) parameters" class="md-nav__link">
    Retrieve install (install only) parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#navigate-to-content" title="Navigate to content" class="md-nav__link">
    Navigate to content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display-content" title="Display content" class="md-nav__link">
    Display content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#track-content" title="Track content" class="md-nav__link">
    Track content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#track-users" title="Track users" class="md-nav__link">
    Track users
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persistent-identities" title="Persistent identities" class="md-nav__link">
    Persistent identities
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logout" title="Logout" class="md-nav__link">
    Logout
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#track-events" title="Track events" class="md-nav__link">
    Track events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#track-commerce" title="Track commerce" class="md-nav__link">
    Track commerce
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handle-referrals" title="Handle referrals" class="md-nav__link">
    Handle referrals
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#referral-rewards" title="Referral rewards" class="md-nav__link">
    Referral rewards
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-a-reward-balance" title="Check a reward balance" class="md-nav__link">
    Check a reward balance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redeem-all-or-some-of-the-reward-balance" title="Redeem all or some of the reward balance" class="md-nav__link">
    Redeem all or some of the reward balance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-credit-history" title="Get credit history" class="md-nav__link">
    Get credit history
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshoot-issues" title="Troubleshoot issues" class="md-nav__link">
    Troubleshoot issues
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommendations" title="Recommendations" class="md-nav__link">
    Recommendations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unable-to-add-branch-required-nuget-packages-to-the-c-project" title="Unable to add Branch-required NuGet packages to the C# project" class="md-nav__link">
    Unable to add Branch-required NuGet packages to the C# project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#android-app-fails-to-build-with-linking-errors" title="Android app fails to build with linking errors" class="md-nav__link">
    Android app fails to build with linking errors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying-ios-app-to-device-fails-with-provisioning-profile-erros-after-changing-entitlements" title="Deploying iOS app to device fails with Provisioning Profile erros after changing entitlements" class="md-nav__link">
    Deploying iOS app to device fails with Provisioning Profile erros after changing entitlements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-apps" title="Sample apps" class="md-nav__link">
    Sample apps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

          
        
      </ul>
    </nav>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
        
        


  <li class="md-nav__item">
    <a href="../../web/setup/" title="Setup your website" class="md-nav__link">
      Setup your website
    </a>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
        
        


  <li class="md-nav__item">
    <a href="../../links/setup/" title="Create deep links" class="md-nav__link">
      Create deep links
    </a>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
        
        


  <li class="md-nav__item">
    <a href="../../dashboard/analytics/" title="Track analytics" class="md-nav__link">
      Track analytics
    </a>
  </li>

      
    
      
        
        
        
        
          
        
          
            <li class="md-nav__item md-nav__link branch-nav-header">
              Advanced deep linking
            </li>
          
        
          
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Deep link web
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Deep link web
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../web/deep-views/" title="Deepviews" class="md-nav__link">
      Deepviews
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../web/journeys/" title="Journeys App Banners" class="md-nav__link">
      Journeys App Banners
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../web/amp-journeys/" title="AMP Journeys" class="md-nav__link">
      AMP Journeys
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../web/text-me-the-app/" title="Text Me The App" class="md-nav__link">
      Text Me The App
    </a>
  </li>

          
        
      </ul>
    </nav>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Deep link ads
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Deep link ads
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/dynamic-product-feeds/" title="Dynamic Product Feeds" class="md-nav__link">
      Dynamic Product Feeds
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/branch-universal-ads/" title="Branch Universal Ads" class="md-nav__link">
      Branch Universal Ads
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/apple/" title="Apple Search" class="md-nav__link">
      Apple Search
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/doubleclick/" title="Doubleclick" class="md-nav__link">
      Doubleclick
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/google-ads-overview/" title="Google" class="md-nav__link">
      Google
    </a>
  </li>

          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/facebook-ads-overview/" title="Facebook" class="md-nav__link">
      Facebook
    </a>
  </li>

          
        
          
        
          
        
          
        
          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../deep-linked-ads/twitter/" title="Twitter" class="md-nav__link">
      Twitter
    </a>
  </li>

          
        
      </ul>
    </nav>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Deep link emails
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Deep link emails
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../emails/appboy/" title="Appboy" class="md-nav__link">
      Appboy
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../emails/blueshift/" title="Blueshift" class="md-nav__link">
      Blueshift
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../emails/epsilon/" title="Epsilon" class="md-nav__link">
      Epsilon
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../emails/mailgun/" title="MailGun" class="md-nav__link">
      MailGun
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../emails/postup/" title="PostUp" class="md-nav__link">
      PostUp
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../emails/responsys/" title="Responsys" class="md-nav__link">
      Responsys
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../emails/sailthru/" title="Sailthru" class="md-nav__link">
      Sailthru
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../emails/salesforce/" title="Salesforce" class="md-nav__link">
      Salesforce
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../emails/sendgrid/" title="SendGrid" class="md-nav__link">
      SendGrid
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../emails/zeta/" title="Zeta" class="md-nav__link">
      Zeta
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../emails/self-serve/" title="Self Serve" class="md-nav__link">
      Self Serve
    </a>
  </li>

          
        
      </ul>
    </nav>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Deep link organic search
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Deep link organic search
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../organic-search/firebase/" title="Firebase" class="md-nav__link">
      Firebase
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../organic-search/spotlight/" title="Spotlight" class="md-nav__link">
      Spotlight
    </a>
  </li>

          
        
      </ul>
    </nav>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Deep link apps
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Deep link apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../app-to-app/android-instant-apps/" title="Android Instant Apps" class="md-nav__link">
      Android Instant Apps
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../app-to-app/imessage-apps/" title="iMessage Apps" class="md-nav__link">
      iMessage Apps
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../app-to-app/facebook-app-invites/" title="Facebook App Invites" class="md-nav__link">
      Facebook App Invites
    </a>
  </li>

          
        
      </ul>
    </nav>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Export analytics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Export analytics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../exports/api/" title="Export API" class="md-nav__link">
      Export API
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../exports/webhooks/" title="Webhooks" class="md-nav__link">
      Webhooks
    </a>
  </li>

          
        
      </ul>
    </nav>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
        
        


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Integrate third party platforms
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Integrate third party platforms
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/adobe-analytics/" title="Abobe Analytics" class="md-nav__link">
      Abobe Analytics
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/adjust/" title="Adjust" class="md-nav__link">
      Adjust
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/amplitude/" title="Amplitude" class="md-nav__link">
      Amplitude
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/appmetrica/" title="AppMetrica" class="md-nav__link">
      AppMetrica
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/appboy/" title="Appboy" class="md-nav__link">
      Appboy
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/appsflyer/" title="Appsflyer" class="md-nav__link">
      Appsflyer
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/fabric-answers/" title="Fabric Answers" class="md-nav__link">
      Fabric Answers
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/google-analytics/" title="Google Analytics" class="md-nav__link">
      Google Analytics
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/kochava/" title="Kochava" class="md-nav__link">
      Kochava
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/localytics/" title="Localytics" class="md-nav__link">
      Localytics
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/mixpanel/" title="Mixpanel" class="md-nav__link">
      Mixpanel
    </a>
  </li>

          
        
          
            
            
            


  <li class="md-nav__item">
    <a href="../../integrations/tune/" title="Tune" class="md-nav__link">
      Tune
    </a>
  </li>

          
        
      </ul>
    </nav>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
            <li class="md-nav__item md-nav__link branch-nav-header">
              Resources
            </li>
          
        
        


  <li class="md-nav__item">
    <a href="../../resources/validation-tools/" title="Validation Tools" class="md-nav__link">
      Validation Tools
    </a>
  </li>

      
    
      
        
        
        
        
          
        
          
        
          
        
        


  <li class="md-nav__item">
    <a href="../../resources/case-studies/" title="Case Studies and Infographics" class="md-nav__link">
      Case Studies and Infographics
    </a>
  </li>

      
    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#integrate-branch" title="Integrate Branch" class="md-nav__link">
    Integrate Branch
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-branch" title="Configure Branch" class="md-nav__link">
    Configure Branch
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#branch-keys" title="Branch keys" class="md-nav__link">
    Branch keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-branch-link-domain-and-branch-key-for-an-app" title="Creating a Branch link domain and Branch key for an app" class="md-nav__link">
    Creating a Branch link domain and Branch key for an app
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-app" title="Configure app" class="md-nav__link">
    Configure app
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-branch-sdk-with-nuget" title="Adding the Branch SDK with NuGet" class="md-nav__link">
    Adding the Branch SDK with NuGet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-the-branch-sdk-without-nuget" title="Adding the Branch SDK without NuGet" class="md-nav__link">
    Adding the Branch SDK without NuGet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-branch" title="Initialize Branch" class="md-nav__link">
    Initialize Branch
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integrating-the-branch-sdk" title="Integrating the Branch SDK" class="md-nav__link">
    Integrating the Branch SDK
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#xamarin-native-solutions" title="Xamarin Native solutions" class="md-nav__link">
    Xamarin Native solutions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-the-branch-sdk-with-an-ios-native-project" title="# Integrating the Branch SDK with an iOS Native project" class="md-nav__link">
    # Integrating the Branch SDK with an iOS Native project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-the-branch-sdk-with-an-android-native-project" title="# Integrating the Branch SDK with an Android Native project" class="md-nav__link">
    # Integrating the Branch SDK with an Android Native project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xamarin-forms-solutions" title="Xamarin Forms solutions" class="md-nav__link">
    Xamarin Forms solutions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-the-c-project" title="# Configuring the C# project" class="md-nav__link">
    # Configuring the C# project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-an-ios-forms-app" title="# Integrating with an iOS Forms app" class="md-nav__link">
    # Integrating with an iOS Forms app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-an-android-forms-app" title="# Integrating with an Android Forms app" class="md-nav__link">
    # Integrating with an Android Forms app
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-submitting-ios-apps-to-the-app-store" title="4 - Submitting iOS Apps to the App Store" class="md-nav__link">
    4 - Submitting iOS Apps to the App Store
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notifying-apple-of-idfa-usage" title="Notifying Apple of IDFA usage" class="md-nav__link">
    Notifying Apple of IDFA usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-deep-link" title="Test deep link" class="md-nav__link">
    Test deep link
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implement-features" title="Implement features" class="md-nav__link">
    Implement features
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-content-reference" title="Create content reference" class="md-nav__link">
    Create content reference
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-deep-link" title="Create deep link" class="md-nav__link">
    Create deep link
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#share-deep-link" title="Share deep link" class="md-nav__link">
    Share deep link
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read-deep-link" title="Read deep link" class="md-nav__link">
    Read deep link
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#retrieve-session-install-or-open-parameters" title="Retrieve session (install or open) parameters" class="md-nav__link">
    Retrieve session (install or open) parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieve-install-install-only-parameters" title="Retrieve install (install only) parameters" class="md-nav__link">
    Retrieve install (install only) parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#navigate-to-content" title="Navigate to content" class="md-nav__link">
    Navigate to content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display-content" title="Display content" class="md-nav__link">
    Display content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#track-content" title="Track content" class="md-nav__link">
    Track content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#track-users" title="Track users" class="md-nav__link">
    Track users
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persistent-identities" title="Persistent identities" class="md-nav__link">
    Persistent identities
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logout" title="Logout" class="md-nav__link">
    Logout
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#track-events" title="Track events" class="md-nav__link">
    Track events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#track-commerce" title="Track commerce" class="md-nav__link">
    Track commerce
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handle-referrals" title="Handle referrals" class="md-nav__link">
    Handle referrals
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#referral-rewards" title="Referral rewards" class="md-nav__link">
    Referral rewards
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-a-reward-balance" title="Check a reward balance" class="md-nav__link">
    Check a reward balance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redeem-all-or-some-of-the-reward-balance" title="Redeem all or some of the reward balance" class="md-nav__link">
    Redeem all or some of the reward balance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-credit-history" title="Get credit history" class="md-nav__link">
    Get credit history
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshoot-issues" title="Troubleshoot issues" class="md-nav__link">
    Troubleshoot issues
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommendations" title="Recommendations" class="md-nav__link">
    Recommendations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unable-to-add-branch-required-nuget-packages-to-the-c-project" title="Unable to add Branch-required NuGet packages to the C# project" class="md-nav__link">
    Unable to add Branch-required NuGet packages to the C# project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#android-app-fails-to-build-with-linking-errors" title="Android app fails to build with linking errors" class="md-nav__link">
    Android app fails to build with linking errors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying-ios-app-to-device-fails-with-provisioning-profile-erros-after-changing-entitlements" title="Deploying iOS app to device fails with Provisioning Profile erros after changing entitlements" class="md-nav__link">
    Deploying iOS app to device fails with Provisioning Profile erros after changing entitlements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-apps" title="Sample apps" class="md-nav__link">
    Sample apps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/branchmetrics/docs/edit/master/src/pages/apps/xamarin.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                  <h1>Xamarin</h1>
                
                <h2 id="integrate-branch">Integrate Branch<a class="headerlink" href="#integrate-branch" title="Permanent link">&para;</a></h2>
<ul>
<li>
<h4 id="configure-branch">Configure Branch<a class="headerlink" href="#configure-branch" title="Permanent link">&para;</a></h4>
</li>
</ul>
<p>Branch links consist of an app-specific base domain (<em>testbed-xamarin.app.link</em>, for example) followed by an alphanumeric suffix. This suffix, referred to as the <em>alias</em>, can be either randomly generated (<em>FCIWxFeBGx</em>, for example) or manually-defined (<em>testlink</em>, for example). The app-specific base domain used to create the links is termed the <em>Branch link domain</em>.</p>
<p>A Branch-integrated app called TestBed-Xamarin and assigned the dafult Branch link domain <em>testbed-xamarin.app.link</em> has the following Branch links:</p>
<ul>
<li><a href="https://testbed-xamarin.app.link/FCIWxFeBGx">https://testbed-xamarin.app.link/FCIWxFeBGx</a></li>
<li><a href="https://testbed-xamarin.app.link/testlink">https://testbed-xamarin.app.link/testlink</a></li>
</ul>
<p>Note that when using the 'app.link' default link domain there is a second, alternate, form of the link domain that comes into play when displaying Branch Deepviews - the <em>alternate link domain</em>. This <em>alternate link domain</em> sees the domain's '.app.link' string replaced by '-alternate.app.link'. If you are using a default app.link link domain, both the regular and alternate domains will be needed when configuring a project to support deep linking.</p>
<h5 id="branch-keys">Branch keys<a class="headerlink" href="#branch-keys" title="Permanent link">&para;</a></h5>
<p>Branch keys consist of a prefix (<strong>key_live_</strong> or <strong>key_test_</strong>) followed by a string of 32 aphanumeric characters (<em>key_live_kdzhBMBYt5Pi4g4DVRfQbdkbqDlm5rIv</em>, for example). Branch keys are used to associate apps with Branch links. An app's Branch key is required to initialize the Branch SDK. Data associated with Branch links can only be read by apps that  use the same Branch key.</p>
<p>Note that the <strong>Live</strong> and <strong>Test</strong> apps on the Branch dashboard are completely separate; each has its own Branch key. Even when <strong>Live</strong> and <strong>Test</strong> sections of the dashboard have been configured identically and links from both are able to open up a particular app, the app will only receive link data for which it has the matching Branch key.</p>
<h5 id="creating-a-branch-link-domain-and-branch-key-for-an-app">Creating a Branch link domain and Branch key for an app<a class="headerlink" href="#creating-a-branch-link-domain-and-branch-key-for-an-app" title="Permanent link">&para;</a></h5>
<p>Register the app on the Branch dashboard, here: <a href="https://dashboard.branch.io"><a href="https://dashboard.branch.io">https://dashboard.branch.io</a></a></p>
<p>The Branch key can be found on the <a href="https://dashboard.branch.io/settings">General Settings</a> page. The app's Branch link domain  will be listed at the very bottom of the <a href="https://dashboard.branch.io/link">Link Settings</a> page.</p>
<ul>
<li>
<h4 id="configure-app">Configure app<a class="headerlink" href="#configure-app" title="Permanent link">&para;</a></h4>
</li>
</ul>
<h5 id="adding-the-branch-sdk-with-nuget"><strong>Adding the Branch SDK with NuGet</strong><a class="headerlink" href="#adding-the-branch-sdk-with-nuget" title="Permanent link">&para;</a></h5>
<p>The Branch Xamarin SDK is available as a NuGet package. The <a href="https://www.nuget.org/packages/Branch-Xamarin-Linking-SDK">Branch NuGet package</a> must be added to each of the Xamarin projects that will use Branch methods.  </p>
<p>To add the Branch NuGet package to a project:  </p>
<ol>
<li>Right-click on each project and select <code>Add</code> &gt; <code>Add NuGet Packages</code>  </li>
<li>If not already present, find the <em>Microsoft BCL Build Components</em> package version 1.0.21 and add it to the project  </li>
<li>Find the <em>Branch Xamarin SDK</em> package version 3.0 and add it to the project  </li>
</ol>
<h5 id="adding-the-branch-sdk-without-nuget"><strong>Adding the Branch SDK without NuGet</strong><a class="headerlink" href="#adding-the-branch-sdk-without-nuget" title="Permanent link">&para;</a></h5>
<p>If, instead of using NuGet, you would rather build and reference the Branch assemblies directly:</p>
<ol>
<li>Clone this repository to the local machine: <code>https://github.com/BranchMetrics/xamarin-branch-deep-linking.git</code></li>
<li>Add the <code>Branch-Xamarin-SDK</code> project to the solution and reference it from the Android, iOS and Forms (if applicable) projects</li>
<li>Add the <code>Branch-Xamarin-SDK.Droid</code> project to the solution and reference it from the Android project, if any</li>
<li>
<p>Add the <code>Branch-Xamarin-SDK.iOS</code> project and reference it from the iOS project, if any</p>
</li>
<li>
<h4 id="initialize-branch">Initialize Branch<a class="headerlink" href="#initialize-branch" title="Permanent link">&para;</a></h4>
</li>
</ol>
<h5 id="integrating-the-branch-sdk">Integrating the Branch SDK<a class="headerlink" href="#integrating-the-branch-sdk" title="Permanent link">&para;</a></h5>
<p>The steps for integrating the Branch SDK with a project differ depending on whether or not the project is creating a Xamarin Forms application and on which mobile platform the project is intended, iOS or Android. Instructions for each of the four scenarios are provided below.</p>
<hr />
<h6 id="xamarin-native-solutions">Xamarin Native solutions<a class="headerlink" href="#xamarin-native-solutions" title="Permanent link">&para;</a></h6>
<h6 id="integrating-the-branch-sdk-with-an-ios-native-project"># <strong>Integrating the Branch SDK with an iOS Native project</strong><a class="headerlink" href="#integrating-the-branch-sdk-with-an-ios-native-project" title="Permanent link">&para;</a></h6>
<p><strong>I. Create an Apple device Provisioning Profile for the app</strong>  </p>
<ol>
<li>Open Xcode and create a new project with the same name as your Xamarin iOS project</li>
<li>On the Xcode project's <strong>General</strong> tab, verify the app's case-sensitive Bundle Identifier is correct and select the appropriate Team (be sure to resolve any errors here)</li>
<li>Select the <strong>Capabilities</strong> tab and enable the <strong>Associated Domains</strong> entitlement</li>
<li>Create 'applinks:' entries for the Branch link domain and the alternate link domain (the link domain can be found at the bottom of the Branch dashboard's <a href="https://dashboard.branch.io/#/settings/link">Link Settings</a> page). For example, the entries for an app with the default link domain 'testiosapp.app.link' would be:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>applinks:testiosapp.app.link</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>applinks:testiosapp-alternate.app.link</code>  </li>
<li>Use Xcode to run this newly-created app on an iOS device. This will create and install a Provisioning Profile with the proper entitlements on that device.</li>
<li>Close Xcode</li>
</ol>
<p><strong>II. Enter the app's settings on the Branch dashboard</strong>  </p>
<ol>
<li>On the <a href="https://dashboard.branch.io/#/settings/link">Link Settings</a> page, check the <strong>I have an iOS App</strong> checkbox</li>
<li>Enter the app's URI Scheme in the <strong>iOS URI Scheme</strong> field (for an app with the URI Scheme <em>testbed-xamarin</em>, for example, the entry would be: <code>testbed-xamarin://</code>)</li>
<li>Enter the app's Apple Store name in the <strong>Apple Store Search</strong> field (if the app is not yet available on the App Store select <strong>Custom URL</strong> and enter as a placeholder the URL of an appropriate web site - the exact site does not matter)</li>
<li>Check the <strong>Enable Universal Links</strong> checkbox</li>
<li>Enter the app's case-sensitive Bundle Identifier and Apple App Prefix as shown on the <a href="https://developer.apple.com/account/ios/identifier/bundle">Apple Developer Portal</a></li>
</ol>
<p><strong>III. Configure the Xamarin project's Info.plist file</strong>  </p>
<ol>
<li>Open the <strong>Info.plist</strong> file</li>
<li>Enter the app's <strong>Bundle Identifier</strong> from the <a href="https://developer.apple.com/account/ios/identifier/bundle">Apple Developer Portal</a> in the <strong>Bundle Identifier</strong> field. <strong>IMPORTANT:</strong> this field will automatically be populated with an all-lowercase value by Xamarin. The value is in fact case sensitive and must match the value in the <a href="https://developer.apple.com/account/ios/identifier/bundle">Apple Developer Portal</a> precisely.  </li>
<li>Click on the <strong>Advanced</strong> tab   </li>
<li>In the <strong>URL Types</strong> section, click the <strong>Add URL Type</strong> button <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>Identifier:</strong> Branch Scheme<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>URL Schemes:</strong> {the app's URI Scheme - 'testiosapp', for example}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>Role:</strong> Editor  </li>
</ol>
<p><img alt="IOS Uri" src="../../../docs/images/branch_ios_uri.png" /></p>
<p><strong>IV. Configure the Xamarin project's Associated Domains entitlement</strong>  </p>
<ol>
<li>Open the <strong>Entitlements.plist</strong> file and browse to <strong>Associated Domains</strong></li>
<li>Create entries for both the app's link domain and its alternate link domain. The entries for the TestBed-Xamarin app would be:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>applinks:testiosapp.app.link</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>applinks:testiosapp-alternate.app.link</code>  </li>
</ol>
<p><img alt="Associated Domains" src="../../../docs/images/branch_ios_domains.png" /></p>
<p><strong>V. Add Branch calls to the AppDelegate.cs file</strong></p>
<p>Branch initialization occurs within the <code>FinishedLaunching</code> method of the <strong>AppDelegate.cs</strong> file. Branch calls are also required in the <code>OpenUrl</code>, <code>ContinueUserActivity</code>, and <code>ReceiveRemoteNotification</code> methods to ensure that Branch link information is handled properly whenever the app becomes active.</p>
<p>Whenever the app becomes active, the Branch SDK will reach out to the Branch back end to retrieve any available link parameters. If the app became active due to a click on a Branch link, the link data will be returned in the <code>InitSessionComplete method</code>. This is where any deep link routing logic should reside. Any error in retrieving Branch link data from the back end will returned in the <code>SessionRequestError</code> method.</p>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="nn">Foundation</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UIKit</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">BranchXamarinSDK</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">BranchXamarinSDK.iOS</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">TestiOSApp.iOS</span>
<span class="p">{</span>
<span class="na">    [Register(&quot;AppDelegate&quot;)]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">AppDelegate</span> <span class="p">:</span> <span class="n">UIApplicationDelegate</span><span class="p">,</span> <span class="n">IBranchBUOSessionInterface</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">override</span> <span class="n">UIWindow</span> <span class="n">Window</span>
        <span class="p">{</span>
            <span class="k">get</span><span class="p">;</span>
            <span class="k">set</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">FinishedLaunching</span><span class="p">(</span><span class="n">UIApplication</span> <span class="n">application</span><span class="p">,</span> <span class="n">NSDictionary</span> <span class="n">launchOptions</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Debug mode - set to &#39;false&#39; before releasing to production</span>
            <span class="n">BranchIOS</span><span class="p">.</span><span class="n">Debug</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span> 
            <span class="n">BranchIOS</span><span class="p">.</span><span class="n">Init</span><span class="p">(</span><span class="s">&quot;key_live_cgEguO4UiDJSL4HIyTu85dkkDAdz38ER&quot;</span><span class="p">,</span> <span class="n">launchOptions</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>

            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// Called when the app is opened via URI scheme</span>
        <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">OpenUrl</span><span class="p">(</span><span class="n">UIApplication</span> <span class="n">application</span><span class="p">,</span> <span class="n">NSUrl</span> <span class="n">url</span><span class="p">,</span> <span class="kt">string</span> <span class="n">sourceApplication</span><span class="p">,</span> <span class="n">NSObject</span> <span class="n">annotation</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">BranchIOS</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">OpenUrl</span><span class="p">(</span><span class="n">url</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Called when the app is opened from a Universal Link</span>
        <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">ContinueUserActivity</span><span class="p">(</span><span class="n">UIApplication</span> <span class="n">application</span><span class="p">,</span> <span class="n">NSUserActivity</span> <span class="n">userActivity</span><span class="p">,</span>
                      <span class="n">UIApplicationRestorationHandler</span> <span class="n">completionHandler</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">BranchIOS</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">ContinueUserActivity</span><span class="p">(</span><span class="n">userActivity</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Called when the app receives a push notification</span>
        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ReceivedRemoteNotification</span><span class="p">(</span><span class="n">UIApplication</span> <span class="n">application</span><span class="p">,</span> <span class="n">NSDictionary</span> <span class="n">userInfo</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">BranchIOS</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">HandlePushNotification</span><span class="p">(</span><span class="n">userInfo</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Called when the Branch initialization is completed</span>
        <span class="c1">// Put deep-linking logic in this method</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">InitSessionComplete</span><span class="p">(</span><span class="n">BranchUniversalObject</span> <span class="n">buo</span><span class="p">,</span> <span class="n">BranchLinkProperties</span> <span class="n">blp</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">NSObject</span><span class="p">[]</span> <span class="n">keys</span> <span class="p">=</span> <span class="p">{</span>
                <span class="n">NSObject</span><span class="p">.</span><span class="n">FromObject</span><span class="p">(</span><span class="s">&quot;+is_first_session&quot;</span><span class="p">)</span>
            <span class="p">};</span>

            <span class="n">NSObject</span><span class="p">[]</span> <span class="n">values</span> <span class="p">=</span> <span class="p">{</span> <span class="n">NSObject</span><span class="p">.</span><span class="n">FromObject</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">};</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">buo</span><span class="p">.</span><span class="n">metadata</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="s">&quot;+is_first_session&quot;</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">values</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">=</span> <span class="n">NSObject</span><span class="p">.</span><span class="n">FromObject</span><span class="p">(</span><span class="n">buo</span><span class="p">.</span><span class="n">metadata</span><span class="p">[</span><span class="s">&quot;+is_first_session&quot;</span><span class="p">]);</span>
            <span class="p">}</span>

            <span class="n">NSDictionary</span> <span class="n">nsData</span> <span class="p">=</span> <span class="n">NSDictionary</span><span class="p">.</span><span class="n">FromObjectsAndKeys</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">keys</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Called when there is an error initializing Branch</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">SessionRequestError</span><span class="p">(</span><span class="n">BranchError</span> <span class="n">error</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Branch error: &quot;</span> <span class="p">+</span> <span class="n">error</span><span class="p">.</span><span class="n">ErrorCode</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">error</span><span class="p">.</span><span class="n">ErrorMessage</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>VI. Update the project's Signing Identity and Provisioning Profile</strong>  </p>
<ol>
<li>Right-click on the iOS project and select <strong>Options</strong></li>
<li>Select <strong>iOS Bundle Signing</strong> </li>
<li>Set the <strong>Signing Identity</strong> and <strong>Provisioning Profile values</strong> to the values used when deploying the Provisioning Profile to the device above</li>
</ol>
<hr />
<h6 id="integrating-the-branch-sdk-with-an-android-native-project"># <strong>Integrating the Branch SDK with an Android Native project</strong><a class="headerlink" href="#integrating-the-branch-sdk-with-an-android-native-project" title="Permanent link">&para;</a></h6>
<p><strong>I. Ensure that the Android project is not using the Shared Mono Runtime</strong></p>
<ol>
<li>Right-click on the Android project and select: <strong>Options</strong></li>
<li>Select: <strong>Android Build</strong></li>
<li>On the <strong>General</strong> tab, un-check: <strong>Use Shared Mono Runtime</strong></li>
</ol>
<p><strong>II. Add app capabilities in the app's Manifest file</strong></p>
<p>In the <em>Required permissions</em> section of <strong>AndroidManifest.xml</strong>, configure the following permissions:</p>
<ul>
<li><em>AccessNetworkState</em></li>
<li><em>Internet</em></li>
</ul>
<p>Additional reading on the Android manifest</p>
<ul>
<li><a href="https://developer.xamarin.com/guides/android/advanced_topics/working_with_androidmanifest.xml/">Working with android manifest.xml</a></li>
<li><a href="https://developer.xamarin.com/recipes/android/general/projects/add_permissions_to_android_manifest/">Add permissions to android manifest</a></li>
</ul>
<p><strong>III. Add the app's Branch key to the Strings.xml file</strong></p>
<p>Add the Branch key to the Android project's <strong>Resources/values/Strings.xml</strong> file. This file contains values that can be accessed by the app's Application class.</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;resources&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;app_name&quot;</span><span class="nt">&gt;</span>TestXamarinFormsApp<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;branch_key&quot;</span><span class="nt">&gt;</span>key_live_liAnF8k7gZUEZv76Rt9a4bffAzlC5zVW<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</pre></div>

<p><em><em>IV. Create the project's *Application</em> class</em>*</p>
<p>Create an Application.cs file</p>
<ol>
<li>Right-click on the .Droid project and select <strong>Add &gt; New File...</strong></li>
<li>Select: <strong>General &gt; Empty File</strong></li>
<li>Name the file: <strong>Application.cs</strong></li>
<li>Enter the following code (replace 'TestAndroidApp' with the actual name of the app):</li>
</ol>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.App</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Content</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Runtime</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">BranchXamarinSDK</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">TestAndroidApp.Droid</span>
<span class="p">{</span>
<span class="na">    [Application(AllowBackup = true, Icon = &quot;@mipmap/icon&quot;, Label = &quot;@string/app_name&quot;)]</span>
<span class="na">    [MetaData(&quot;io.branch.sdk.auto_link_disable&quot;, Value = &quot;false&quot;)]</span>
<span class="na">    [MetaData(&quot;io.branch.sdk.TestMode&quot;, Value = &quot;true&quot;)]</span>
<span class="na">    [MetaData(&quot;io.branch.sdk.BranchKey&quot;, Value = &quot;@string/branch_key&quot;)]</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">TestAndroidApp</span> <span class="p">:</span> <span class="n">Application</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="nf">TestAndroidApp</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">javaReference</span><span class="p">,</span> <span class="n">JniHandleOwnership</span> <span class="n">transfer</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">javaReference</span><span class="p">,</span> <span class="n">transfer</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreate</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">base</span><span class="p">.</span><span class="n">OnCreate</span><span class="p">();</span>
            <span class="n">BranchAndroid</span><span class="p">.</span><span class="n">GetAutoInstance</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">ApplicationContext</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>io.branch.sdk.TestMode</td>
<td>Setting this parameter to <em>true</em> enables Debug Mode, which causes simple uninstall/reinstalls of the app to trigger <em>install</em> events. Be sure to disable this before deploying to production. Note that enabling Debug Mode on Android also forces the app to use the Branch <em>Test</em> key if this key has been added to the project. Apps running with a <em>Test</em> key will be unable to receive data from Branch links created with the <em>Live</em> key.</td>
</tr>
<tr>
<td>io.branch.sdk.BranchKey</td>
<td>The app's Branch key. Both a <em>Live</em> key and a <em>Test</em> key can be added to the Strings.xml file. When <em>Test</em> Mode is enabled the app will automatically use the <em>Test</em> key, if one has been specified.</td>
</tr>
</tbody>
</table>
<p><strong>V. Create an activity to handle Branch events: BranchActivity</strong></p>
<ol>
<li>Right-click on the .Droid project and select <strong>Add &gt; New File...</strong></li>
<li>Select: <strong>Android &gt; Activity</strong></li>
<li>Rename the file: <strong>BranchActivity.cs</strong></li>
<li>Enter the following code (replace 'TestAndroidApp' with the actual name of the app):</li>
</ol>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">BranchXamarinSDK</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Android.App</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Content</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.OS</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Runtime</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Views</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Widget</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">TestAndroidApp.Droid</span>
<span class="p">{</span>
<span class="na">    [Activity(Label = &quot;BranchActivity&quot;)]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BranchActivity</span> <span class="p">:</span> <span class="n">Activity</span>

    <span class="p">{</span>
        <span class="k">private</span> <span class="kt">string</span> <span class="n">logString</span> <span class="p">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">base</span><span class="p">.</span><span class="n">OnCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>

            <span class="n">LogMessage</span><span class="p">(</span><span class="s">&quot;Branch initialization completed: &quot;</span><span class="p">);</span>

            <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">data</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="p">&lt;</span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;&gt;(</span><span class="n">Intent</span><span class="p">.</span><span class="n">GetStringExtra</span><span class="p">(</span><span class="s">&quot;BranchData&quot;</span><span class="p">));</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">key</span> <span class="k">in</span> <span class="n">data</span><span class="p">.</span><span class="n">Keys</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">LogMessage</span><span class="p">(</span><span class="n">key</span> <span class="p">+</span> <span class="s">&quot; : &quot;</span> <span class="p">+</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">].</span><span class="n">ToString</span><span class="p">());</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="cp">#region Utils</span>

        <span class="k">void</span> <span class="nf">LogMessage</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
            <span class="n">logString</span> <span class="p">+=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="n">ToLongTimeString</span><span class="p">()</span> <span class="p">+</span> <span class="s">&quot;&gt; &quot;</span> <span class="p">+</span> <span class="n">message</span> <span class="p">+</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="cp">#endregion</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>VI. Create an activity to handle Branch errors: BranchErrorActivity</strong></p>
<ol>
<li>Right-click on the .Droid project and select <strong>Add &gt; New File...</strong></li>
<li>Select: <strong>Android &gt; Activity</strong></li>
<li>Rename the file: <strong>BranchErrorActivity.cs</strong></li>
<li>Enter the following code (replace 'TestAndroidApp' with the actual name of the app):</li>
</ol>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Android.App</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Content</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.OS</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Runtime</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Views</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Widget</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">TestAndroidApp.Droid</span>
<span class="p">{</span>
<span class="na">    [Activity(Label = &quot;BranchErrorActivity&quot;)]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BranchErrorActivity</span> <span class="p">:</span> <span class="n">Activity</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="kt">string</span> <span class="n">logString</span> <span class="p">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">base</span><span class="p">.</span><span class="n">OnCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>

            <span class="n">LogMessage</span><span class="p">(</span><span class="s">&quot;Branch initialization failed&quot;</span><span class="p">);</span>
            <span class="n">LogMessage</span><span class="p">(</span><span class="s">&quot;Error code: &quot;</span> <span class="p">+</span> <span class="n">Intent</span><span class="p">.</span><span class="n">Extras</span><span class="p">.</span><span class="n">GetInt</span><span class="p">(</span><span class="s">&quot;ErrorCode&quot;</span><span class="p">).</span><span class="n">ToString</span><span class="p">());</span>
            <span class="n">LogMessage</span><span class="p">(</span><span class="n">Intent</span><span class="p">.</span><span class="n">Extras</span><span class="p">.</span><span class="n">GetString</span><span class="p">(</span><span class="s">&quot;ErrorMessage&quot;</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="cp">#region Utils</span>

        <span class="k">void</span> <span class="nf">LogMessage</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
            <span class="n">logString</span> <span class="p">+=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="n">ToLongTimeString</span><span class="p">()</span> <span class="p">+</span> <span class="s">&quot;&gt; &quot;</span> <span class="p">+</span> <span class="n">message</span> <span class="p">+</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="cp">#endregion</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>VII. Initialize Branch and configure Branch session management</strong></p>
<p>Branch must be initilialized in the OnCreate method of either the Application class or the first Activity launched by the app. The OnNewIntent method must be added to retrieve the latest link identifier when the app becomes active due to a Branch link click.</p>
<p>Branch initializes asynchronously, with Branch link parameters being returned following a network call to Branch. If initialization is successful, the InitSessionComplete method will be invoked. If initialization is unsuccessful, the SessionRequestError method will be invoked. Deep link routing logic should be located in the InitSessionComplete method.</p>
<p>In the code example below the following Branch initialization and session management steps have been added to MainActivity.cs:</p>
<ul>
<li>An Activity to respond to the app's URI Scheme</li>
<li>An Activity is launched in <code>singleTask</code> mode</li>
<li>Override the OnCreate method and initialize the Branch SDK</li>
<li>Override the OnNewIntent method</li>
<li>Add an InitSessionComplete method for processing Branch link information (this is where deep link routing code should be located)</li>
<li>Add a SessionRequestError method to handle situations where Branch fails to initialize</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="nn">Android.App</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Widget</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.OS</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">BranchXamarinSDK</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Content</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">TestAndroidApp.Droid</span>
<span class="p">{</span>
<span class="na">    [Activity(Label = &quot;TestAndroidApp&quot;, MainLauncher = true, Icon = &quot;@mipmap/icon&quot;, LaunchMode = Android.Content.PM.LaunchMode.SingleTask)]</span>

<span class="na">    [IntentFilter(new[]</span> <span class="p">{</span> <span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="p">},</span>
    <span class="n">Categories</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;android.intent.category.DEFAULT&quot;</span><span class="p">,</span> <span class="s">&quot;android.intent.category.BROWSABLE&quot;</span> <span class="p">},</span>
    <span class="n">DataScheme</span> <span class="p">=</span> <span class="s">&quot;testandroidapp&quot;</span><span class="p">,</span>
    <span class="n">DataHost</span> <span class="p">=</span> <span class="s">&quot;open&quot;</span><span class="p">)]</span>

<span class="na">    [IntentFilter(new[]</span> <span class="p">{</span> <span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="p">},</span>
    <span class="n">Categories</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;android.intent.category.DEFAULT&quot;</span><span class="p">,</span> <span class="s">&quot;android.intent.category.BROWSABLE&quot;</span> <span class="p">},</span>
    <span class="n">DataScheme</span> <span class="p">=</span> <span class="s">&quot;https&quot;</span><span class="p">,</span>
    <span class="n">DataHost</span> <span class="p">=</span> <span class="s">&quot;testandroidapp.app.link&quot;</span><span class="p">)]</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="n">Activity</span><span class="p">,</span> <span class="n">IBranchSessionInterface</span>
    <span class="p">{</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">base</span><span class="p">.</span><span class="n">OnCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>

            <span class="n">BranchAndroid</span><span class="p">.</span><span class="n">Init</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">Resources</span><span class="p">.</span><span class="n">GetString</span><span class="p">(</span><span class="n">Resource</span><span class="p">.</span><span class="n">String</span><span class="p">.</span><span class="n">branch_key</span><span class="p">),</span> <span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Ensure we get the updated link identifier when the app becomes active</span>
        <span class="c1">// due to a Branch link click after having been in the background</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnNewIntent</span><span class="p">(</span><span class="n">Intent</span> <span class="n">intent</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Intent</span> <span class="p">=</span> <span class="n">intent</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">InitSessionComplete</span><span class="p">(</span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">data</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">intent</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">typeof</span><span class="p">(</span><span class="n">BranchActivity</span><span class="p">));</span>
            <span class="n">intent</span><span class="p">.</span><span class="n">PutExtra</span><span class="p">(</span><span class="s">&quot;BranchData&quot;</span><span class="p">,</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="n">SerializeObject</span><span class="p">(</span><span class="n">data</span><span class="p">));</span>

            <span class="n">StartActivity</span><span class="p">(</span><span class="n">intent</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">SessionRequestError</span><span class="p">(</span><span class="n">BranchError</span> <span class="n">error</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Branch session initialization error: &quot;</span> <span class="p">+</span> <span class="n">error</span><span class="p">.</span><span class="n">ErrorCode</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">error</span><span class="p">.</span><span class="n">ErrorMessage</span><span class="p">);</span>

            <span class="kt">var</span> <span class="n">intent</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">typeof</span><span class="p">(</span><span class="n">BranchErrorActivity</span><span class="p">));</span>
            <span class="n">intent</span><span class="p">.</span><span class="n">PutExtra</span><span class="p">(</span><span class="s">&quot;ErrorCode&quot;</span><span class="p">,</span> <span class="n">error</span><span class="p">.</span><span class="n">ErrorCode</span><span class="p">);</span>
            <span class="n">intent</span><span class="p">.</span><span class="n">PutExtra</span><span class="p">(</span><span class="s">&quot;ErrorMessage&quot;</span><span class="p">,</span> <span class="n">error</span><span class="p">.</span><span class="n">ErrorMessage</span><span class="p">);</span>

            <span class="n">StartActivity</span><span class="p">(</span><span class="n">intent</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<hr />
<h6 id="xamarin-forms-solutions">Xamarin Forms solutions<a class="headerlink" href="#xamarin-forms-solutions" title="Permanent link">&para;</a></h6>
<h6 id="configuring-the-c-project"># <strong>Configuring the C# project</strong><a class="headerlink" href="#configuring-the-c-project" title="Permanent link">&para;</a></h6>
<p>These steps are required for all Forms projects, both iOS and Android.</p>
<p><strong>I. Change the C# project's profile to PCL 4.5 - Profile78</strong></p>
<ol>
<li>Right-click on the project name and select: <strong>Options</strong>  </li>
<li>Browse the menu to <strong>Build &gt; General</strong>  </li>
<li>Change the <strong>Current Profile</strong> to: <strong>PCL 4.5 - Profile78</strong>  </li>
</ol>
<p><strong>II. Add the Branch SDK with NuGet</strong></p>
<p>The Branch Xamarin SDK is available as a NuGet package. The <a href="https://www.nuget.org/packages/Branch-Xamarin-Linking-SDK">Branch NuGet package</a> must be added to each of the Xamarin projects that will use Branch methods.  </p>
<ol>
<li>Right-click on each project and select <strong>Add &gt; Add NuGet Packages</strong>  </li>
<li>If not already present, find the <em>Microsoft BCL Build Components</em> package version 1.0.21 and add it to the project  </li>
<li>Find the <em>Branch Xamarin SDK</em> package version 3.0 and add it to the project  </li>
</ol>
<p><strong>III. Create a class for Branch session handling</strong></p>
<p>Branch initializes asynchronously, with Branch link parameters being returned following a network call to Branch. If initialization is successful, the InitSessionComplete method will be invoked. If initialization is unsuccessful, the SessionRequestError method will be invoked. Deep link routing logic should be located in the InitSessionComplete method.</p>
<ol>
<li>Right-click on the C# project and select <strong>Add &gt; New File...</strong>  </li>
<li>Select: <strong>General &gt; Empty Class</strong>  </li>
<li>Rename the file: <strong>TestXamarinFormsApp.cs</strong>  </li>
<li>Enter the following code (replacing 'TestXamarinFormsApp' with the actual name of the app):  </li>
</ol>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="nn">BranchXamarinSDK</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.ComponentModel</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Xamarin.Forms</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">TestXamarinFormsApp</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">TestXamarinFormsApp</span> <span class="p">:</span> <span class="n">Application</span><span class="p">,</span> <span class="n">IBranchSessionInterface</span>
    <span class="p">{</span>

        <span class="k">public</span> <span class="nf">TestXamarinFormsApp</span><span class="p">()</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="cp">#region IBranchSessionInterface implementation</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">InitSessionComplete</span><span class="p">(</span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">data</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">CloseSessionComplete</span><span class="p">()</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">SessionRequestError</span><span class="p">(</span><span class="n">BranchError</span> <span class="n">error</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="cp">#endregion</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>IV. Create a class for handling link data</strong></p>
<p>Branch stores link data in an object referred to as the <strong>Branch Universal Object</strong>, or <strong>BUO</strong>.</p>
<ol>
<li>Right-click on the C# project and select <strong>Add &gt; New File...</strong>  </li>
<li>Select: <strong>General &gt; Empty Class</strong>  </li>
<li>Rename the file: <strong>TestXamarinFormsAppBUO.cs</strong>  </li>
<li>Enter the following code (replace 'TestXamarinFormsApp' with the actual name of the app):</li>
</ol>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="nn">BranchXamarinSDK</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.ComponentModel</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Xamarin.Forms</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">TestXamarinFormsApp</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">TestXamarinFormsAppBUO</span> <span class="p">:</span> <span class="n">Application</span><span class="p">,</span> <span class="n">IBranchBUOSessionInterface</span>
    <span class="p">{</span>

        <span class="k">public</span> <span class="nf">TestXamarinFormsAppBUO</span><span class="p">()</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="cp">#region IBranchBUOSessionInterface implementation</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">InitSessionComplete</span><span class="p">(</span><span class="n">BranchUniversalObject</span> <span class="n">buo</span><span class="p">,</span> <span class="n">BranchLinkProperties</span> <span class="n">blp</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">SessionRequestError</span><span class="p">(</span><span class="n">BranchError</span> <span class="n">error</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="cp">#endregion</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h6 id="integrating-with-an-ios-forms-app"># <strong>Integrating with an iOS Forms app</strong><a class="headerlink" href="#integrating-with-an-ios-forms-app" title="Permanent link">&para;</a></h6>
<p><strong>I. Create an Apple device Provisioning Profile for the app</strong></p>
<ol>
<li>Open Xcode and create a new project with the same name as your Xamarin iOS project  </li>
<li>On the Xcode project's <strong>General</strong> tab, enter the app's Bundle Identifier and select the appropriate Team (be sure to resolve any errors here)  </li>
<li>Select the <strong>Capabilities</strong> tab and enable the <strong>Associated Domains</strong> entitlement  </li>
<li>Create 'applinks:' entries for the Branch link domain assigned to the app (the link domain can be found at the bottom of the Branch dashboard's <a href="https://dashboard.branch.io/#/settings/link">Link Settings</a> page). For example, the entries for the app <em>TestXamarinFormsApp</em> would be:<br />
&nbsp;&nbsp;&nbsp;&nbsp;<code>applinks:testxamarinformsapp.app.link</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code>applinks:testxamarinformsapp-alternate.app.link</code>  </li>
<li>Use Xcode to run this newly-created app on an iOS device. This will create and install a Provisioning Profile with the proper entitlements on that device.  </li>
<li>Close Xcode  </li>
</ol>
<p><strong>II. Enter the app's settings on the Branch dashboard</strong></p>
<ol>
<li>On the <a href="https://dashboard.branch.io/#/settings/link">Link Settings</a> page, check the <strong>I have an iOS App</strong> checkbox  </li>
<li>Enter the app's URI Scheme in the <strong>iOS URI Scheme</strong> field (for an app with the URI Scheme <em>testxamarinformsapp</em>, for example, the entry would be: <code>testxamarinformsapp://</code>)  </li>
<li>Enter the app's Apple Store name in the <strong>Apple Store Search</strong> field (if the app is not yet available on the App Store select <strong>Custom URL</strong> and enter as a placeholder the URL of an appropriate web site - the exact site does not matter)  </li>
<li>Check the <strong>Enable Universal Links</strong> checkbox  </li>
<li>Enter the app's Bundle Identifier and Apple App Prefix as shown on the <a href="https://developer.apple.com/account/ios/identifier/bundle">Apple Developer Portal</a>  </li>
</ol>
<p><strong>III. Configure the Xamarin project's Info.plist file</strong></p>
<ol>
<li>Open the <strong>Info.plist</strong> file</li>
<li>Enter the app's <strong>Bundle Identifier</strong> from the <a href="https://developer.apple.com/account/ios/identifier/bundle">Apple Developer Portal</a> in the <strong>Bundle Identifier</strong> field. <strong>IMPORTANT:</strong> this field will automatically be populated with an all-lowercase value by Xamarin. The value is in fact case sensitive and must match the value in the <a href="https://developer.apple.com/account/ios/identifier/bundle">Apple Developer Portal</a> precisely.  </li>
<li>Click on the <strong>Advanced</strong> tab   </li>
<li>In the <strong>URL Types</strong> section, click the <strong>Add URL Type</strong> button <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>Identifier:</strong> Branch Scheme<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>URL Schemes:</strong> {the app's URI Scheme - 'testxamarinformsapp', for example}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>Role:</strong> Editor  </li>
</ol>
<p><img alt="IOS Uri" src="../../../docs/images/branch_ios_forms_uri.png" /></p>
<p><strong>IV. Configure the Xamarin project's Associated Domains entitlement</strong></p>
<ol>
<li>Open the <strong>Entitlements.plist</strong> file and browse to <strong>Associated Domains</strong> (if this file does not already exist, create it)</li>
<li>Create entries for both the app's link domain and its alternate link domain. The entries for the TestBed-Xamarin app would be:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>applinks:testxamarinformsapp.app.link</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>applinks:testxamarinformsapp-alternate.app.link</code>  </li>
</ol>
<p><img alt="Associated Domains" src="../../../docs/images/branch_ios_forms_domains.png" /></p>
<p><strong>V. Add Branch calls to the AppDelegate.cs file</strong></p>
<p>To ensure that the Branch SDK initializes when the app starts and can retrieve link parameters whenever the app becomes active, Branch initialization occurs within the <code>FinishedLaunching</code> method of the AppDelegate.cs file. Branch calls are also required in the OpenUrl, ContinueUserActivity, and ReceiveRemoteNotification methods to ensure that Branch link information is handled properly whenever the app becomes active. The <strong>AppDelegate.cs</strong> file should look like this:</p>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Foundation</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UIKit</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">BranchXamarinSDK</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">TestXamarinFormsApp</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">TestXamarinFormsApp.iOS</span>
<span class="p">{</span>
<span class="na">    [Register(&quot;AppDelegate&quot;)]</span>
    <span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">AppDelegate</span> <span class="p">:</span> <span class="k">global</span><span class="p">::</span><span class="n">Xamarin</span><span class="p">.</span><span class="n">Forms</span><span class="p">.</span><span class="n">Platform</span><span class="p">.</span><span class="n">iOS</span><span class="p">.</span><span class="n">FormsApplicationDelegate</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">FinishedLaunching</span><span class="p">(</span><span class="n">UIApplication</span> <span class="n">app</span><span class="p">,</span> <span class="n">NSDictionary</span> <span class="n">options</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">global</span><span class="p">::</span><span class="n">Xamarin</span><span class="p">.</span><span class="n">Forms</span><span class="p">.</span><span class="n">Forms</span><span class="p">.</span><span class="n">Init</span><span class="p">();</span>

            <span class="c1">// Debug mode - set to &#39;false&#39; before releasing to production</span>
            <span class="n">BranchIOS</span><span class="p">.</span><span class="n">Debug</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

            <span class="n">TestXamarinFormsAppBUO</span> <span class="n">appBUO</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TestXamarinFormsAppBUO</span><span class="p">();</span>
            <span class="n">BranchIOS</span><span class="p">.</span><span class="n">Init</span><span class="p">(</span><span class="s">&quot;key_live_liAnF8k7gZUEZv76Rt9a4bffAzlC5zVW&quot;</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">appBUO</span><span class="p">);</span>
            <span class="n">LoadApplication</span><span class="p">(</span><span class="n">appBUO</span><span class="p">);</span>

            <span class="k">return</span> <span class="k">base</span><span class="p">.</span><span class="n">FinishedLaunching</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">options</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Called when the app is opened via URI scheme</span>
        <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">OpenUrl</span><span class="p">(</span><span class="n">UIApplication</span> <span class="n">application</span><span class="p">,</span> <span class="n">NSUrl</span> <span class="n">url</span><span class="p">,</span> <span class="kt">string</span> <span class="n">sourceApplication</span><span class="p">,</span> <span class="n">NSObject</span> <span class="n">annotation</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">BranchIOS</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">OpenUrl</span><span class="p">(</span><span class="n">url</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Called when the app is opened from a Universal Link </span>
        <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">ContinueUserActivity</span><span class="p">(</span><span class="n">UIApplication</span> <span class="n">application</span><span class="p">,</span> <span class="n">NSUserActivity</span> <span class="n">userActivity</span><span class="p">,</span> <span class="n">UIApplicationRestorationHandler</span> <span class="n">completionHandler</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">BranchIOS</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">ContinueUserActivity</span><span class="p">(</span><span class="n">userActivity</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// Called when the app receives a push notification</span>
        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ReceivedRemoteNotification</span><span class="p">(</span><span class="n">UIApplication</span> <span class="n">application</span><span class="p">,</span> <span class="n">NSDictionary</span> <span class="n">userInfo</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">BranchIOS</span><span class="p">.</span><span class="n">getInstance</span><span class="p">().</span><span class="n">HandlePushNotification</span><span class="p">(</span><span class="n">userInfo</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<hr />
<h6 id="integrating-with-an-android-forms-app"># <strong>Integrating with an Android Forms app</strong><a class="headerlink" href="#integrating-with-an-android-forms-app" title="Permanent link">&para;</a></h6>
<p><strong>I. Ensure that the Android project is not using the Shared Mono Runtime</strong></p>
<ol>
<li>Right-click on the Android project and select: <strong>Options</strong>  </li>
<li>Select: <strong>Android Build</strong>  </li>
<li>On the <strong>General</strong> tab, un-check: <strong>Use Shared Mono Runtime</strong>  </li>
</ol>
<p><strong>II. Add app capabilities in the AndroidManifest.xml file</strong></p>
<p>In the <em>Required permissions</em> section of <strong>AndroidManifest.xml</strong>, configure the following permissions:</p>
<ul>
<li><em>AccessNetworkState</em></li>
<li><em>Internet</em></li>
</ul>
<p>Additional reading on the Android manifest</p>
<ul>
<li><a href="https://developer.xamarin.com/guides/android/advanced_topics/working_with_androidmanifest.xml/">Working with android manifest.xml</a></li>
<li><a href="https://developer.xamarin.com/recipes/android/general/projects/add_permissions_to_android_manifest/">Add permissions to android manifest</a></li>
</ul>
<p><strong>III. Add the app's Branch key to the Strings.xml file</strong></p>
<p>Create a <strong>Resources/values/Strings.xml</strong> file that can be accessed by the app's Application class for the Android project and add the Branch key to this file.</p>
<ol>
<li>In the Android project, browse to <strong>Resources/values</strong></li>
<li>Right-click on the <strong>values</strong> folder and select: <strong>Add &gt; New File...</strong></li>
<li>Select: <strong>XML &gt; Empty XML File</strong></li>
<li>Name the file: <strong>Strings</strong></li>
<li>Enter the following values:</li>
</ol>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;resources&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;app_name&quot;</span><span class="nt">&gt;</span>TestXamarinFormsApp<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;branch_key&quot;</span><span class="nt">&gt;</span>key_live_liAnF8k7gZUEZv76Rt9a4bffAzlC5zVW<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</pre></div>

<p><strong>IV. Configure the .Droid project's Application class</strong></p>
<p>Within the .Droid project's Application class:</p>
<ul>
<li>Set the Branch SDK's initialization parameters  </li>
<li>Override the <code>OnCreate()</code> method to call <code>BranchAndroid.GetAutoInstance</code>  </li>
</ul>
<p>If an Appplication class does not already exist for the project, create one:</p>
<ol>
<li>Right-click on the .Droid project and select: <strong>Add &gt; New File...</strong></li>
<li>Select: <strong>General &gt; Empty Class</strong></li>
<li>Name the file: <em>{app name}</em> ('TestXamarinFormsApp', for example)</li>
</ol>
<p>The file should have the following contents:</p>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.App</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Content</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Runtime</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">BranchXamarinSDK</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">TestXamarinFormsApp.Droid</span>
<span class="p">{</span>

<span class="na">    [Application (AllowBackup = true, Icon = &quot;@drawable/icon&quot;, Label = &quot;@string/app_name&quot;)]</span>
<span class="na">    [MetaData(&quot;io.branch.sdk.auto_link_disable&quot;, Value = &quot;false&quot;)]</span>
<span class="na">    [MetaData(&quot;io.branch.sdk.TestMode&quot;, Value = &quot;true&quot;)]</span>
<span class="na">    [MetaData(&quot;io.branch.sdk.BranchKey&quot;, Value = &quot;@string/branch_key&quot;)]</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">App</span> <span class="p">:</span> <span class="n">Application</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="nf">App</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">javaReference</span><span class="p">,</span> <span class="n">JniHandleOwnership</span> <span class="n">transfer</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">javaReference</span><span class="p">,</span> <span class="n">transfer</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreate</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">base</span><span class="p">.</span><span class="n">OnCreate</span><span class="p">();</span>
            <span class="n">BranchAndroid</span><span class="p">.</span><span class="n">GetAutoInstance</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">ApplicationContext</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>io.branch.sdk.TestMode</td>
<td>Setting this parameter to <em>true</em> enables Debug Mode, which causes simple uninstall/reinstalls of the app to trigger <em>install</em> events. Be sure to disable this before deploying to production. Note that enabling Debug Mode on Android also forces the app to use the Branch <em>Test</em> key if this key has been added to the project. Apps running with a <em>Test</em> key will be unable to receive data from Branch links created with the <em>Live</em> key.</td>
</tr>
<tr>
<td>io.branch.sdk.BranchKey</td>
<td>The app's Branch key. Both a <em>Live</em> key and a <em>Test</em> key can be added to the Strings.xml file. When <em>Test</em> Mode is enabled the app will automatically use the <em>Test</em> key, if one has been specified.</td>
</tr>
</tbody>
</table>
<p><strong>V. Initialize Branch</strong></p>
<p>Branch must be initilialized in the OnCreate method of either the Application class or the first Activity launched by the app. The OnNewIntent method must be added to retrieve the latest link identifier when the app becomes active due to a Branch link click.</p>
<p>In the code example below the following Branch initialization and session management steps have been added to MainActivity.cs:</p>
<ul>
<li>Register an Activity to respond to the app's URI Scheme</li>
<li>Ensure the Activity is launched in <code>singleTask</code> mode</li>
<li>Override the OnCreate method and initialize the Branch SDK</li>
<li>Override the OnNewIntent method</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Android.App</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Content</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Content.PM</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Runtime</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Views</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Widget</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.OS</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">BranchXamarinSDK</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">TestXamarinFormsApp</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">TestXamarinFormsApp.Droid</span>
<span class="p">{</span>
<span class="na">    [Activity(Label = &quot;TestXamarinFormsApp.Droid&quot;, LaunchMode = LaunchMode.SingleTask, Icon = &quot;@drawable/icon&quot;, Theme = &quot;@style/MyTheme&quot;, MainLauncher = true, ConfigurationChanges = ConfigChanges.ScreenSize | ConfigChanges.Orientation)]</span>

<span class="na">    [IntentFilter(new[]</span> <span class="p">{</span> <span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="p">},</span>
        <span class="n">Categories</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;android.intent.category.DEFAULT&quot;</span><span class="p">,</span> <span class="s">&quot;android.intent.category.BROWSABLE&quot;</span> <span class="p">},</span>
        <span class="n">DataScheme</span> <span class="p">=</span> <span class="s">&quot;testxamarinformsapp&quot;</span><span class="p">,</span>
        <span class="n">DataHost</span> <span class="p">=</span> <span class="s">&quot;open&quot;</span><span class="p">)]</span>

<span class="na">    [IntentFilter(new[]</span> <span class="p">{</span> <span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="p">},</span>
        <span class="n">Categories</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;android.intent.category.DEFAULT&quot;</span><span class="p">,</span> <span class="s">&quot;android.intent.category.BROWSABLE&quot;</span> <span class="p">},</span>
        <span class="n">DataScheme</span> <span class="p">=</span> <span class="s">&quot;https&quot;</span><span class="p">,</span>
        <span class="n">DataHost</span> <span class="p">=</span> <span class="s">&quot;testxamarinformsapp.app.link&quot;</span><span class="p">)]</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="k">global</span><span class="p">::</span><span class="n">Xamarin</span><span class="p">.</span><span class="n">Forms</span><span class="p">.</span><span class="n">Platform</span><span class="p">.</span><span class="n">Android</span><span class="p">.</span><span class="n">FormsApplicationActivity</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">base</span><span class="p">.</span><span class="n">OnCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>

            <span class="k">global</span><span class="p">::</span><span class="n">Xamarin</span><span class="p">.</span><span class="n">Forms</span><span class="p">.</span><span class="n">Forms</span><span class="p">.</span><span class="n">Init</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">savedInstanceState</span><span class="p">);</span>

            <span class="n">TestXamarinFormsAppBUO</span> <span class="n">linkData</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TestXamarinFormsAppBUO</span><span class="p">();</span>
            <span class="n">BranchAndroid</span><span class="p">.</span><span class="n">Init</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">GetString</span><span class="p">(</span><span class="n">Resource</span><span class="p">.</span><span class="n">String</span><span class="p">.</span><span class="n">branch_key</span><span class="p">),</span> <span class="n">linkData</span><span class="p">);</span>
            <span class="n">LoadApplication</span><span class="p">(</span><span class="n">linkData</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnNewIntent</span><span class="p">(</span><span class="n">Intent</span> <span class="n">intent</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Intent</span> <span class="p">=</span> <span class="n">intent</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<hr />
<h4 id="4-submitting-ios-apps-to-the-app-store">4 - Submitting iOS Apps to the App Store<a class="headerlink" href="#4-submitting-ios-apps-to-the-app-store" title="Permanent link">&para;</a></h4>
<p>Branch uses the Apple Advertising Identifier, or <em>IDFA</em>, to identify users across our entire partner network, greatly increasing the accuracy of matching. Read more about matching accuracy on the <a href="https://dev.branch.io/getting-started/matching-accuracy/overview/">Matching Platform</a> page.  </p>
<h5 id="notifying-apple-of-idfa-usage">Notifying Apple of IDFA usage<a class="headerlink" href="#notifying-apple-of-idfa-usage" title="Permanent link">&para;</a></h5>
<p>Be sure to let Apple know that you are using the IDFA when submitting apps to the App Store after integrating the Branch SDK.  </p>
<ol>
<li>Answer <strong>Yes</strong> when presented with the question: <strong>Does this app use the Advertising Identifier (IDFA)?</strong>  </li>
<li>Check the following two boxes:  </li>
<li><strong>Attribute this app installation to a previously served advertisement</strong>  </li>
<li><strong>Attribute an action taken within this app to a previously served advertisement</strong>  </li>
</ol>
<p><img alt="Apple Advertising Identifier" src="../../../docs/images/idfa.png" /></p>
<ul>
<li>
<h4 id="test-deep-link">Test deep link<a class="headerlink" href="#test-deep-link" title="Permanent link">&para;</a></h4>
</li>
</ul>
<h2 id="implement-features">Implement features<a class="headerlink" href="#implement-features" title="Permanent link">&para;</a></h2>
<ul>
<li>
<h4 id="create-content-reference">Create content reference<a class="headerlink" href="#create-content-reference" title="Permanent link">&para;</a></h4>
</li>
</ul>
<p>The Branch Universal Object is a data object representing a piece of content that is referenced by a Branch link. Together with a set of Link Properties (marketing metadata such as Campaign and Channel as well as Branch-behavior related parameters such as $deepview_path), can be combined to generate a Branch link.</p>
<div class="codehilite"><pre><span></span><span class="n">BranchUniversalObject</span> <span class="n">universalObject</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BranchUniversalObject</span><span class="p">();</span>
<span class="n">universalObject</span><span class="p">.</span><span class="n">canonicalIdentifier</span> <span class="p">=</span> <span class="s">&quot;id12345&quot;</span><span class="p">;</span>
<span class="n">universalObject</span><span class="p">.</span><span class="n">title</span> <span class="p">=</span> <span class="s">&quot;id12345 title&quot;</span><span class="p">;</span>
<span class="n">universalObject</span><span class="p">.</span><span class="n">contentDescription</span> <span class="p">=</span> <span class="s">&quot;My awesome piece of content!&quot;</span><span class="p">;</span>
<span class="n">universalObject</span><span class="p">.</span><span class="n">imageUrl</span> <span class="p">=</span> <span class="s">&quot;https://s3-us-west-1.amazonaws.com/branchhost/mosaic_og.png&quot;</span><span class="p">;</span>
<span class="n">universalObject</span><span class="p">.</span><span class="n">metadata</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">);</span>
</pre></div>

<ul>
<li>
<h4 id="create-deep-link">Create deep link<a class="headerlink" href="#create-deep-link" title="Permanent link">&para;</a></h4>
</li>
</ul>
<p>Branch links can be created in-app (as well as in many other ways - see: <a href="https://github.com/BranchMetrics/Branch-Integration-Guides/blob/master/url-creation-guide.md">Branch link creation guide</a>. When they are, and setIdentity has been called to associate a User ID with the current user session, Branch links will be associated with that User ID.</p>
<div class="codehilite"><pre><span></span><span class="n">BranchLinkProperties</span> <span class="n">linkProperties</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BranchLinkProperties</span><span class="p">();</span>
<span class="n">linkProperties</span><span class="p">.</span><span class="n">tags</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;tag1&quot;</span><span class="p">);</span>
<span class="n">linkProperties</span><span class="p">.</span><span class="n">tags</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;tag2&quot;</span><span class="p">);</span>
<span class="n">linkProperties</span><span class="p">.</span><span class="n">feature</span> <span class="p">=</span> <span class="s">&quot;sharing&quot;</span><span class="p">;</span>
<span class="n">linkProperties</span><span class="p">.</span><span class="n">channel</span> <span class="p">=</span> <span class="s">&quot;facebook&quot;</span><span class="p">;</span>
<span class="n">linkProperties</span><span class="p">.</span><span class="n">controlParams</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;$desktop_url&quot;</span><span class="p">,</span> <span class="s">&quot;http://example.com&quot;</span><span class="p">);</span>

<span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">().</span><span class="n">GetShortURL</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span>
                                  <span class="n">universalObject</span><span class="p">,</span>
                                  <span class="n">linkProperties</span><span class="p">);</span>
</pre></div>

<p><strong>Note</strong>
You can customize the Facebook OG tags of each URL if you want to dynamically share content by using the following <em>optional keys in the data dictionary</em>. Please use this <a href="https://developers.facebook.com/tools/debug/og/object">Facebook tool</a> to debug the OG tags!</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>"$og_title"</td>
<td>The title you'd like to appear for the link in social media</td>
</tr>
<tr>
<td>"$og_description"</td>
<td>The description you'd like to appear for the link in social media</td>
</tr>
<tr>
<td>"$og_image_url"</td>
<td>The URL for the image you'd like to appear for the link in social media</td>
</tr>
<tr>
<td>"$og_video"</td>
<td>The URL for the video</td>
</tr>
<tr>
<td>"$og_url"</td>
<td>The URL you'd like to appear</td>
</tr>
<tr>
<td>"$og_app_id"</td>
<td>the OG app ID. Optional and rarely used.</td>
</tr>
</tbody>
</table>
<p>Also, you do custom redirection by inserting the following <em>optional keys in the dictionary</em>:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>"$desktop_url"</td>
<td>Where to send the user on a desktop or laptop. By default it is the Branch-hosted text-me service</td>
</tr>
<tr>
<td>"$android_url"</td>
<td>The replacement URL for the Play Store to send the user if they don't have the app. <em>Only necessary if you want a mobile web splash</em></td>
</tr>
<tr>
<td>"$ios_url"</td>
<td>The replacement URL for the App Store to send the user if they don't have the app. <em>Only necessary if you want a mobile web splash</em></td>
</tr>
<tr>
<td>"$ipad_url"</td>
<td>Same as above but for iPad Store</td>
</tr>
<tr>
<td>"$fire_url"</td>
<td>Same as above but for Amazon Fire Store</td>
</tr>
<tr>
<td>"$blackberry_url"</td>
<td>Same as above but for Blackberry Store</td>
</tr>
<tr>
<td>"$windows_phone_url"</td>
<td>Same as above but for Windows Store</td>
</tr>
</tbody>
</table>
<p>You have the ability to control the direct deep linking of each link by inserting the following <em>optional keys in the dictionary</em>:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>"$deeplink_path"</td>
<td>The value of the deep link path that you'd like us to append to the URI. For example, you could specify "$deeplink_path": "radio/station/456" and we'll open the app with the URI "theapp://radio/station/456?link_click_id=branch-identifier". This is primarily for supporting legacy deep linking infrastructure.</td>
</tr>
<tr>
<td>"$always_deeplink"</td>
<td>true or false. (default is not to deep link first) This key can be specified to have our linking service force try to open the app, even if we're not sure the user has the app installed. If the app is not installed, we fall back to the respective app store or $platform_url key. By default, we only open the app if we've seen a user initiate a session in the app from a Branch link (has been cookied and deep linked by Branch)</td>
</tr>
</tbody>
</table>
<ul>
<li>
<h4 id="share-deep-link">Share deep link<a class="headerlink" href="#share-deep-link" title="Permanent link">&para;</a></h4>
</li>
</ul>
<div class="codehilite"><pre><span></span>ShareLink (IBranchLinkShareInterface callback,
           BranchUniversalObject universalObject,
           BranchLinkProperties linkProperties,
           string message)
</pre></div>

<ul>
<li>
<h4 id="read-deep-link">Read deep link<a class="headerlink" href="#read-deep-link" title="Permanent link">&para;</a></h4>
</li>
</ul>
<h5 id="retrieve-session-install-or-open-parameters">Retrieve session (install or open) parameters<a class="headerlink" href="#retrieve-session-install-or-open-parameters" title="Permanent link">&para;</a></h5>
<p>Session parameters will be available at any point. If there are no params, the dictionary will be empty. This refreshes with every new session (app installs AND app opens)</p>
<p><div class="codehilite"><pre><span></span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">sessionParams</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">().</span><span class="n">GetLatestReferringParams</span><span class="p">();</span>
</pre></div>
or</p>
<div class="codehilite"><pre><span></span><span class="n">BranchUniversalObject</span> <span class="n">buo</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">().</span><span class="n">GetLastReferringBranchUniversalObject</span><span class="p">();</span>
<span class="n">BranchLinkProperties</span> <span class="n">blp</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">().</span><span class="n">GetLastReferringBranchLinkProperties</span><span class="p">();</span>
</pre></div>

<h5 id="retrieve-install-install-only-parameters">Retrieve install (install only) parameters<a class="headerlink" href="#retrieve-install-install-only-parameters" title="Permanent link">&para;</a></h5>
<p>If you ever want to access the original session params (the parameters passed in for the first install event only), you can use this line. This is useful if you only want to reward users who newly installed the app from a referral link or something.</p>
<p><div class="codehilite"><pre><span></span><span class="n">Branch</span> <span class="n">branch</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span> <span class="p">();</span>
<span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">installParams</span> <span class="p">=</span> <span class="n">branch</span><span class="p">.</span><span class="n">GetFirstReferringParams</span><span class="p">();</span>
</pre></div>
or</p>
<div class="codehilite"><pre><span></span><span class="n">BranchUniversalObject</span> <span class="n">buo</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">().</span><span class="n">GetFirstReferringBranchUniversalObject</span><span class="p">();</span>
<span class="n">BranchLinkProperties</span> <span class="n">blp</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span><span class="p">().</span><span class="n">GetFirstReferringBranchLinkProperties</span><span class="p">();</span>
</pre></div>

<ul>
<li>
<h4 id="navigate-to-content">Navigate to content<a class="headerlink" href="#navigate-to-content" title="Permanent link">&para;</a></h4>
</li>
<li>
<h4 id="display-content">Display content<a class="headerlink" href="#display-content" title="Permanent link">&para;</a></h4>
</li>
<li>
<h4 id="track-content">Track content<a class="headerlink" href="#track-content" title="Permanent link">&para;</a></h4>
</li>
</ul>
<div class="codehilite"><pre><span></span>RegisterView (BranchUniversalObject universalObject)
</pre></div>

<ul>
<li>
<h4 id="track-users">Track users<a class="headerlink" href="#track-users" title="Permanent link">&para;</a></h4>
</li>
</ul>
<h5 id="persistent-identities">Persistent identities<a class="headerlink" href="#persistent-identities" title="Permanent link">&para;</a></h5>
<p>Often, you might have the own user IDs, or want referral and event data to persist across platforms or uninstall/reinstall. It's helpful if you know the users access the service from different devices. This where we introduce the concept of an 'identity'.</p>
<p>To identify a user, just call:</p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span> <span class="n">branch</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span> <span class="p">();</span> 
<span class="n">branch</span><span class="p">.</span><span class="n">SetIdentity</span><span class="p">(</span><span class="s">&quot;the user id&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>  <span class="c1">// Where this implements IBranchIdentityInterface</span>
</pre></div>

<h6 id="logout">Logout<a class="headerlink" href="#logout" title="Permanent link">&para;</a></h6>
<p>If you provide a logout function in the app, be sure to clear the user when the logout completes. This will ensure that all the stored parameters get cleared and all events are properly attributed to the right identity.</p>
<p><strong>Warning</strong> this call will clear the referral credits and attribution on the device.</p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span> <span class="n">branch</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span> <span class="p">();</span>
<span class="n">branch</span><span class="p">.</span><span class="n">Logout</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// Where this implements IBranchIdentityInterface</span>
</pre></div>

<ul>
<li>
<h4 id="track-events">Track events<a class="headerlink" href="#track-events" title="Permanent link">&para;</a></h4>
</li>
</ul>
<div class="codehilite"><pre><span></span><span class="n">Branch</span> <span class="n">branch</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span> <span class="p">();</span>
<span class="n">branch</span><span class="p">.</span><span class="n">UserCompletedAction</span><span class="p">(</span><span class="s">&quot;the_custom_event&quot;</span><span class="p">);</span>
</pre></div>

<p>OR if you want to store some state with the event</p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span> <span class="n">branch</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span> <span class="p">();</span>
<span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">data</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;();</span>
<span class="n">data</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;sku&quot;</span><span class="p">,</span> <span class="s">&quot;123456789&quot;</span><span class="p">);</span>
<span class="n">branch</span><span class="p">.</span><span class="n">UserCompletedAction</span><span class="p">(</span><span class="s">&quot;purchase_event&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
</pre></div>

<p>Some example events you might want to track:</p>
<div class="codehilite"><pre><span></span><span class="s">&quot;complete_purchase&quot;</span>
<span class="s">&quot;wrote_message&quot;</span>
<span class="s">&quot;finished_level_ten&quot;</span>
</pre></div>

<ul>
<li>
<h4 id="track-commerce">Track commerce<a class="headerlink" href="#track-commerce" title="Permanent link">&para;</a></h4>
</li>
<li>
<h4 id="handle-referrals">Handle referrals<a class="headerlink" href="#handle-referrals" title="Permanent link">&para;</a></h4>
</li>
</ul>
<h5 id="referral-rewards">Referral rewards<a class="headerlink" href="#referral-rewards" title="Permanent link">&para;</a></h5>
<p>In a standard referral system, you have 2 parties: the original user and the invitee. Our system is flexible enough to handle rewards for all users. Here are a couple example scenarios:</p>
<p>1) Reward the original user for taking action (eg. inviting, purchasing, etc)</p>
<p>2) Reward the invitee for installing the app from the original user's referral link</p>
<p>3) Reward the original user when the invitee takes action (eg. give the original user credit when their the invitee buys something)</p>
<p>These reward definitions are created on the dashboard, under the 'Reward Rules' section in the 'Referrals' tab on the dashboard.</p>
<p>Warning: For a referral program, you should not use unique awards for custom events and redeem pre-identify call. This can allow users to cheat the system.</p>
<h6 id="check-a-reward-balance">Check a reward balance<a class="headerlink" href="#check-a-reward-balance" title="Permanent link">&para;</a></h6>
<p>Reward balances change randomly on the backend when certain actions are taken (defined by the rules), so you'll need to make an asynchronous call to retrieve the balance. Here is the syntax:</p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span> <span class="n">branch</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span> <span class="p">();</span>
<span class="n">branch</span><span class="p">.</span><span class="n">LoadRewards</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

<span class="cp">#region IBranchRewardsInterface implementation</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">RewardsLoaded</span> <span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Do something with the data...</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">RewardsRedeemed</span> <span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Do something with the data...</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">CreditHistory</span> <span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">CreditHistoryEntry</span><span class="p">&gt;</span> <span class="n">history</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Do something with the data...</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">RewardsRequestError</span> <span class="p">(</span><span class="n">BranchError</span> <span class="n">error</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Do something with the data...</span>
        <span class="p">}</span>

<span class="cp">#endregion</span>
</pre></div>

<h6 id="redeem-all-or-some-of-the-reward-balance">Redeem all or some of the reward balance<a class="headerlink" href="#redeem-all-or-some-of-the-reward-balance" title="Permanent link">&para;</a></h6>
<p>We will store how many of the rewards have been deployed so that you don't have to track it on the end. In order to save that you gave the credits to the user, you can call redeem. Redemptions will reduce the balance of outstanding credits permanently.</p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span> <span class="n">branch</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span> <span class="p">();</span>
<span class="n">branch</span><span class="p">.</span><span class="n">RedeemRewards</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">bucket</span><span class="p">);</span>

<span class="cp">#region IBranchRewardsInterface implementation</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">RewardsLoaded</span> <span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Do something with the data...</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">RewardsRedeemed</span> <span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Do something with the data...</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">CreditHistory</span> <span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">CreditHistoryEntry</span><span class="p">&gt;</span> <span class="n">history</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Do something with the data...</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">RewardsRequestError</span> <span class="p">(</span><span class="n">BranchError</span> <span class="n">error</span><span class="p">)</span>
        <span class="p">{</span>
         <span class="c1">// Do something with the data...</span>
        <span class="p">}</span>

        <span class="cp">#endregion</span>
</pre></div>

<h6 id="get-credit-history">Get credit history<a class="headerlink" href="#get-credit-history" title="Permanent link">&para;</a></h6>
<p>This call will retrieve the entire history of credits and redemptions from the individual user.  It also implements the IBranchRewardsInterface(see above). To use this call, implement like so:</p>
<div class="codehilite"><pre><span></span><span class="n">Branch</span> <span class="n">branch</span> <span class="p">=</span> <span class="n">Branch</span><span class="p">.</span><span class="n">GetInstance</span> <span class="p">();</span>
<span class="n">branch</span><span class="p">.</span><span class="n">GetCreditHistory</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</pre></div>

<p>The response will return an array that has been parsed from the following JSON:
<div class="codehilite"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;transaction&quot;</span><span class="p">:</span> <span class="p">{</span>
                           <span class="nt">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-14T01:54:40.425Z&quot;</span><span class="p">,</span>
                           <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;50388077461373184&quot;</span><span class="p">,</span>
                           <span class="nt">&quot;bucket&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
                           <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                           <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">5</span>
                       <span class="p">},</span>
        <span class="nt">&quot;referrer&quot;</span><span class="p">:</span> <span class="s2">&quot;12345678&quot;</span><span class="p">,</span>
        <span class="nt">&quot;referree&quot;</span><span class="p">:</span> <span class="kc">null</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;transaction&quot;</span><span class="p">:</span> <span class="p">{</span>
                           <span class="nt">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-14T01:55:09.474Z&quot;</span><span class="p">,</span>
                           <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;50388199301710081&quot;</span><span class="p">,</span>
                           <span class="nt">&quot;bucket&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
                           <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                           <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">-3</span>
                       <span class="p">},</span>
        <span class="nt">&quot;referrer&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;referree&quot;</span><span class="p">:</span> <span class="s2">&quot;12345678&quot;</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div></p>
<p><strong>referrer</strong>
: The id of the referring user for this credit transaction. Returns null if no referrer is involved. Note this id is the user id in developer's own system that's previously passed to Branch's identify user API call.</p>
<p><strong>referree</strong>
: The id of the user who was referred for this credit transaction. Returns null if no referree is involved. Note this id is the user id in developer's own system that's previously passed to Branch's identify user API call.</p>
<p><strong>type</strong>
: This is the type of credit transaction</p>
<ol>
<li><em>0</em> - A reward that was added automatically by the user completing an action or referral</li>
<li><em>1</em> - A reward that was added manually</li>
<li><em>2</em> - A redemption of credits that occurred through our API or SDKs</li>
<li><em>3</em> - This is a very unique case where we will subtract credits automatically when we detect fraud</li>
</ol>
<h2 id="troubleshoot-issues">Troubleshoot issues<a class="headerlink" href="#troubleshoot-issues" title="Permanent link">&para;</a></h2>
<ul>
<li>
<h4 id="recommendations">Recommendations<a class="headerlink" href="#recommendations" title="Permanent link">&para;</a></h4>
</li>
</ul>
<h5 id="unable-to-add-branch-required-nuget-packages-to-the-c-project">Unable to add Branch-required NuGet packages to the C# project<a class="headerlink" href="#unable-to-add-branch-required-nuget-packages-to-the-c-project" title="Permanent link">&para;</a></h5>
<p>Adding required NuGet packages to the C# project may fail if the project has not been configured to use <strong>PCL 4.5 - Profile78</strong></p>
<ol>
<li>Right-click on the project name and select: <strong>Options</strong>  </li>
<li>Browse the menu to <strong>Build &gt; General</strong>  </li>
<li>Change the <strong>Current Profile</strong> to: <strong>PCL 4.5 - Profile78</strong>  </li>
</ol>
<h5 id="android-app-fails-to-build-with-linking-errors">Android app fails to build with linking errors<a class="headerlink" href="#android-app-fails-to-build-with-linking-errors" title="Permanent link">&para;</a></h5>
<p>The Newtonsoft JSON NuGet package is automatically added to a project when the Branch Xamarin SDK NuGet package is added. There is a known issue with this package that results in linking errors when building a project.</p>
<p>error XA0009: Error while loading assembly: /Users/david/Projects/TestXamarinFormsApp/Droid/obj/Debug/android/assets/mscorlib.dll</p>
<p>To resolve this issue with the Newtonsoft JSON NuGet package:</p>
<ol>
<li>Right-click on the project and select Options  </li>
<li>Go to <strong>Android Build</strong> and select the <strong>Linker</strong> tab  </li>
<li>Select: <strong>Release</strong>  </li>
<li>Go to the <strong>Ignore assemblies</strong> box  </li>
<li>Add: <strong>System.Core</strong>  </li>
<li>Rebuild the app  </li>
</ol>
<h5 id="deploying-ios-app-to-device-fails-with-provisioning-profile-erros-after-changing-entitlements">Deploying iOS app to device fails with Provisioning Profile erros after changing entitlements<a class="headerlink" href="#deploying-ios-app-to-device-fails-with-provisioning-profile-erros-after-changing-entitlements" title="Permanent link">&para;</a></h5>
<p>Xamarin automatically populates the <strong>Bundle Identifier</strong> field in the <strong>Info.plist</strong> file with an all-lowercase value derived from the app's name. This value is in fact case sensitive and must match the value in the <a href="https://developer.apple.com/account/ios/identifier/bundle">Apple Developer Portal</a> precisely. The default Xamarin configuration may work when there are no entitlements configured and then suddenly begin failing after entitlements have been added.</p>
<p>This issue can be resolved by ensuring that the <strong>Bundle Identifier</strong> in the <strong>Info.plist</strong> matches the <strong>Bundle Identifier</strong> shown on the <a href="https://developer.apple.com/account/ios/identifier/bundle">Apple Developer Portal</a>.</p>
<ol>
<li>Open the <strong>Info.plist</strong> file</li>
<li>
<p>Enter the app's <strong>Bundle Identifier</strong> from the <a href="https://developer.apple.com/account/ios/identifier/bundle">Apple Developer Portal</a> in the <strong>Bundle Identifier</strong> field</p>
</li>
<li>
<h4 id="sample-apps">Sample apps<a class="headerlink" href="#sample-apps" title="Permanent link">&para;</a></h4>
</li>
</ol>
<p>There are four fully-functional demo apps included in this repository: a Xamarin Native and Xamarin Forms apps for both iOS and Android platforms. Use these apps as reference models for integrating the Branch SDK.</p>
<p><strong>Testbed-Xamarin (Native apps)</strong></p>
<ul>
<li><a href="https://github.com/BranchMetrics/xamarin-branch-deep-linking/tree/master/Examples/droid_example">iOS</a>  </li>
<li><a href="https://github.com/BranchMetrics/xamarin-branch-deep-linking/tree/master/Examples/ios_example">Android</a>  </li>
</ul>
<p><strong>Testbed-XamarinForms (Forms apps)</strong></p>
<ul>
<li><a href="https://github.com/BranchMetrics/xamarin-branch-deep-linking/tree/master/Branch-Xamarin-Testbed.iOS">iOS</a>  </li>
<li><a href="https://github.com/BranchMetrics/xamarin-branch-deep-linking/tree/master/Branch-Xamarin-Testbed.Droid">Android</a>  </li>
</ul>
<p>Should you run into issues with the SDK, please check that they are present in the appropriate demo app before submitting any issue as a bug.</p>
                
                  
                
              
              
                
                  <h2 id="__comments">Comments</h2>
                  <div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
    this.page.url = "https://branchmetrics.github.io/docs/pages/apps/xamarin/";
    this.page.identifier =
      "/pages/apps/xamarin/";
  };
  (function() {
    var d = document, s = d.createElement("script");
    s.src = "//branch-docs.disqus.com/embed.js";
    s.setAttribute("data-timestamp", +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
                
              
            </article>
          </div>
        </div>
      </main>
      
        
          <div class="branch-floater branch-beta">Beta Release</div>
        
        
          <a class="branch-floater branch-old-docs" href="http://dev.branch.io/" title="old docs">&#8678; Old docs</a>
        
      
      
        <div class="modals">
          <div id="modal-search" class="modal dialog">
            <div class="modal-background"></div>
            <div class="modal-content" id="algolia-search-container">
              <i class="material-icons modal-close right">close</i>
              <h2>Search</h2>
              <input type="text" placeholder="search docs..." id="algolia-doc-search" autofocus>
            </div>
          </div>
          <div id="modal-unhelpful" class="modal dialog">
            <div class="modal-background"></div>
            <div class="modal-content">
              <i class="material-icons modal-close right">close</i>
              <h2>Unhelpful?</h2>
              <p>How can we improve or assist you?</p>
              <a href="#" class="improve-doc" title="Improve This Doc">Improve this doc</a>
              <a href="#" class="contact-support" title="Contact support">Contact support</a>
            </div>
          </div>
          <div id="modal-choose-app" class="modal dialog">
            <div class="modal-background"></div>
            <div class="modal-content">
              <i class="material-icons modal-close right">close</i>
              <h2>Choose your app</h2>
              <button type="button">iOS</button>
              <button type="button">Android</button>
              <button type="button">Cordova Ionic PhoneGap</button>
              <button type="button">React Native</button>
            </div>
          </div>
          <div id="modal-helpful" class="modal notification">
            <div class="modal-background"></div>
            <div class="modal-content">
              <i class="material-icons modal-close right">close</i>
              <h2>Thank you</h2>
            </div>
          </div>
          <div id="modal-image" class="modal dialog image">
            <div class="modal-background"></div>
            <div class="modal-content">
              <i class="material-icons modal-close right">close</i>
              <h2>Image</h2>
              <a id="modal-image-link" href="#">
                <img id="modal-image-img">
              </a>
            </div>
          </div>
          <div id="modal-code" class="modal dialog code">
            <div class="modal-background"></div>
            <div class="modal-content">
              <i class="material-icons modal-close right">close</i>
              <h2>Select your language</h2>
              <div class="flex">
                <button id="modal-code-ios">iOS</button>
                <button id="modal-code-android">Android</button>
              </div>
              <div class="flex">
                <button id="modal-code-adobe">Adobe AIR</button>
                <button id="modal-code-cordova">Cordova PhoneGap Ionic</button>
              </div>
              <div class="flex">
                <button id="modal-code-mparticle-android">mParticle Android</button>
                <button id="modal-code-mparticle-ios">mParticle iOS</button>
              </div>
              <div class="flex">
                <button id="modal-code-titanium">Titanium</button>
                <button id="modal-code-react">React Native</button>
              </div>
              <div class="flex">
                <button id="modal-code-unity">Unity</button>
                <button id="modal-code-xamarin">Xamarin</button>
              </div>
            </div>
          </div>
        </div>
      
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 <a href="https://branch.io">Branch</a>
          </div>
        
        All rights reserved
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://branch.io" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/BranchMetrics/Documentation" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/branchmetrics" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.facebook.com/branchmetrics" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://www.linkedin.com/company-beta/3813083" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application-68a35578af.js"></script>
      
      
      <script>app.initialize({url:{base:"../../.."}})</script>
      
        <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
        <script>docsearch({apiKey:"887017d17a2c1e9490ad2c44caa7e817",indexName:"branchmetrics",inputSelector:"#algolia-doc-search",debug:"True",algoliaOptions:{hitsPerPage:"15"}})</script>
      
      
        <script src="../../../js/router.js"></script>
      
        <script src="../../../js/events.js"></script>
      
        <script src="../../../js/modals.js"></script>
      
        <script src="../../../js/images.js"></script>
      
        <script src="../../../js/buttons.js"></script>
      
        <script src="../../../js/analytics.js"></script>
      
        <script src="../../../js/tabs.js"></script>
      
        <script src="../../../js/languages.js"></script>
      
        <script src="../../../js/utils.js"></script>
      
        <script src="../../../js/main.js"></script>
      
    
    
      
    
  </body>
</html>